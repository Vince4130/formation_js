<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title>LocalStorage</title>
        <link rel="stylesheet" href="css/mycss.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script>
            function updateTable() {
                var tab = document.getElementById('tab');
                tab.innerHTML = '<tr><th>Nom</th><th>Valeur</th></tr>';
                var nb = localStorage.length;
                
                for(var i=0; i<nb; i++) {
                    k = localStorage.key(i);
                    v = localStorage.getItem(k);
                    tab.innerHTML += '<tr><td>' + k + '</td><td>' + v + '</td></tr>';
                }
            }

            function reading() {
                    f.ta.value = localStorage.getItem(f.name.value);
            }

            function save() {
                localStorage.setItem(f.name.value, f.ta.value);
                updateTable();
            }

            function deleteOne() {
                localStorage.removeItem(f.name.value);
                updateTable();
            }

            function deleteAll() {
                localStorage.clear();
                updateTable();
            }
        </script>
    </head>
    <body onload="updateTable();">
        
        <form name="f" style="width: 600px; margin: auto; margin-top: 50px; ">
            <h2>Stockage local HTML5</h2>
            <fieldset>
                <legend>Entrez la donnée à Stocker</legend>
                <div class="mb-3 border" style="padding: 20px; border-radius: 5px;">
                    <label for="lettre" class="form-label">Nom</label>
                    <input type="text" class="form-control" name="name" id="lettre">
                    <p></p>
                     <label for="texta1">Valeur</label>
                    <textarea class="form-control" name="ta" id="texta" cols="40" rows="5"></textarea>
                    <p></p>
                    <div class="buttons">
                        <input type="button" class="btn btn-info myButton" value="Read" onclick="reading()"">
                        <input type="button" class="btn btn-success myButton" value="Save" onclick="save();">
                        <input type="button" class="btn btn-danger myButton" value="Delete" onclick="deleteOne();">
                        <input type="button" class="btn btn-danger myButton" value="Delete All"  onclick="deleteAll();">
                    </div>
                </div>
            </fieldset>
        </form>
        <table class="table text-center table-hover"  style="width: 600px; margin: auto;" id="tab">
            
        </table>
    </body>
</html>
